"use strict";angular.module("rotachatApp",["rotachatApp.common","ngCookies","ngResource","ngSanitize","btford.socket-io","ui.router","ui.bootstrap","ngSanitize","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(a,b,c,d){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){c.isLoggedInAsync(function(a){d.authenticate&&!a&&b.path("/login")})})}]),angular.module("rotachatApp.common",[]),angular.module("rotachatApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("rotachatApp").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("rotachatApp").controller("SettingsCtrl",["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Password successfully changed."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Incorrect password",a.message=""})}}]),angular.module("rotachatApp").controller("SignupCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.register=function(d){a.submitted=!0,d.$valid&&b.createUser({name:a.user.name,email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("rotachatApp").controller("AdminCtrl",["$scope","$http","Auth","User",function(a,b,c,d){a.users=d.query(),a["delete"]=function(b){d.remove({id:b._id}),angular.forEach(a.users,function(c,d){c===b&&a.users.splice(d,1)})}}]),angular.module("rotachatApp").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl"})}]),angular.module("rotachatApp").controller("MainCtrl",["$scope","$http","socket","$location",function(a,b,c,d){a.tables=[],a.blobStoreBaseUrl="https://roundtables.blob.core.windows.net/highlights/",b.get("/api/tables").success(function(b){$.each(b,function(b,c){c.highlightUrl=a.blobStoreBaseUrl+c.highlightURL}),a.tables=b,c.syncUpdates("table",a.tables)}),a.viewTable=function(){var a=this.table._id,b="/table/"+a;d.path(b)},a.$on("$destroy",function(){c.unsyncUpdates("table")})}]),angular.module("rotachatApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("rotachatApp").controller("MessageAdderCtrl",["$scope","$http","$stateParams","$location","MessageRecorder",function(a,b,c,d,e){function f(a){a=JSON.parse(a),g(a)}function g(e){a.submitted=!0;var e={topic:a.topic,tags:a.tags,videoURL:e.Path};b.post("/api/tables/"+c.id+"/messages/",e).success(function(){d.path("/tables/"+c.id)})}a.tags=["example"],a.getTagClass=function(){return"label label-primary"},a.createMessage=function(){e.saveVideo(f)}}]),angular.module("rotachatApp").config(["$stateProvider",function(a){a.state("MessageAdder",{url:"/tables/:id/messages/add",templateUrl:"app/table/MessageAdder/MessageAdder.html",controller:"MessageAdderCtrl"})}]),angular.module("rotachatApp").controller("MessageRecorderCtrl",["$scope","$http","MessageRecorder",function(a,b,c){function d(a){navigator.getUserMedia=navigator.mozGetUserMedia||navigator.webkitGetUserMedia,navigator.getUserMedia({audio:!0,video:!0},function(b){video.src=URL.createObjectURL(b),video.muted=!0,a(b)},function(a){console.error(a)})}a.startRecordingDisabled=!1,a.stopRecordingDisabled=!0,a.startRecording=function(){a.startRecordingDisabled=!0,a.stopRecordingDisabled=!1,d(function(a){window.audioVideoRecorder=window.RecordRTC(a,{type:"video"}),window.audioVideoRecorder.startRecording()})},a.stopRecording=function(){a.stopRecordingDisabled=!0,a.startRecordingDisabled=!1,window.audioVideoRecorder.stopRecording(function(b){a.downloadURL=b,video.muted=!1,a.$apply(),document.getElementById("video").src=b})}}]),angular.module("rotachatApp").directive("messageRecorder",function(){return{restrict:"EA",scope:{tabletitle:"=",url:"="},controller:"MessageRecorderCtrl",templateUrl:"/app/table/MessageRecorder/MessageRecorder.html"}}),angular.module("rotachatApp").factory("MessageRecorder",function(){return{saveVideo:function(a){var b=window.audioVideoRecorder.getBlob(),c=new FormData;c.append("vid"+(new Date).getTime(),b);var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&200===d.status&&a(d.responseText)},d.open("POST","/api/assets"),d.send(c)}}}),angular.module("rotachatApp").controller("TableAdderCtrl",["$scope","$http",function(a,b){function c(b){b=JSON.parse(b),a.blob=b.blob,a.saveImage(d)}function d(b){b=JSON.parse(b),a.highlightBlob=b.blob,e()}function e(){a.submitted=!0;var c={title:a.title,topic:a.topic,HighlightBlob:a.highlightBlob,message:{tags:a.tags,VideoBlob:a.blob,topic:a.topic}};b.post("/api/table",c).success(function(){a.message="New Table Created!"})}a.tags=["example"],a.getTagClass=function(){return"label label-primary"},a.createTable=function(){a.$$childTail.$$childHead.saveVideo(c)},a.saveImage=function(a){var b=$("#previewSelect").get(0).files[0].slice(),c=new FormData;c.append("hi"+(new Date).getTime(),b);var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&200===d.status&&a(d.responseText)},d.open("POST","/api/highlights"),d.send(c)}}]),angular.module("rotachatApp").config(["$stateProvider",function(a){a.state("TableAdder",{url:"/tables/add",templateUrl:"app/table/TableAdder/TableAdder.html",controller:"TableAdderCtrl"})}]),angular.module("rotachatApp").directive("tableConsole",function(){return{restrict:"EA",scope:{tabletitle:"=",url:"="},templateUrl:"/app/table/TableConsole/TableConsole.html",link:function(a,b,c){$(".table-container-scrolldiv").slimScroll({height:"auto"})}}}),angular.module("rotachatApp").directive("tablePlaylist",function(){return{templateUrl:"/app/table/TablePlaylist/TablePlaylist.html",restrict:"E",link:function(a,b,c){$(".table-playlist-scrolldiv").slimScroll({height:"auto"})}}}),angular.module("rotachatApp").directive("tableVideoContainer",function(){return{templateUrl:"/app/table/TableVideoContainer/TableVideoContainer.html",restrict:"E"}}),angular.module("rotachatApp").directive("tableVideoInfoPanel",function(){return{templateUrl:"/app/table/TableVideoInfoPanel/TableVideoInfoPanel.html",restrict:"E",scope:{info:"="}}}),angular.module("rotachatApp").constant("ROUTES",{BLOB_BASE:"https://roundtables.blob.core.windows.Fnet/videos/",HIGHLIGHT_BASE:"https://roundtables.blob.core.windows.net/highlights/"}).controller("TableCtrl",["$scope","$rootScope","$http","$stateParams","$location","$sce","ROUTES","$timeout",function(a,b,c,d,e,f,g,h){a.state=null,a.API=null,a.currentVideo=0,a.currentMessageInfo={title:"Some Title",author:"Chris Cordle",tags:["yeah","bro"]},a.setVideo=function(b){a.API.stop(),a.currentVideo=b,a.config.sources=a.videos[b].sources,h(a.API.play.bind(a.API),0)},a.videos=[],a.config={preload:"none",autoHide:!1,autoHideTime:3e3,autoPlay:!1,sources:[],theme:{url:"bower_components/videogular-themes-default/videogular.css"}},a.onCompleteVideo=function(){a.isCompleted=!0,a.currentVideo++,a.currentVideo>=a.videos.length&&(a.currentVideo=0),a.setVideo(a.currentVideo)},a.onPlayerReady=function(b){a.API=b},a.highlightURL=g.HIGHLIGHT_BASE;var i=d.id;a.tableTitle="Table name that is ridiculously long and expressive",c.get("/api/tables/"+i).success(function(b){a.highlightUrl=g.HIGHLIGHT_BASE+b.highlightURL,b.user?a.user=b.user._id:a.user="",$.each(b.messages,function(b,c){a.videos.push({sources:[{src:f.trustAsResourceUrl(c.videoURL),type:"video/mp4"}]});var d=_.indexOf(c.cheers,a.user);-1===d?c.cheeredYet=!1:c.cheeredYet=!0}),a.config.sources=a.videos[0].sources,b.messages.reverse(),a.table=b}).error(function(){console.log("Failed to retrieve table.")}),a.cheerMessage=function(b){!function(){var d={tableid:i,messageid:a.table.messages[b]._id};c.post("/api/table/cheermessage",d).success(function(c){c.messages.reverse();var d=c.messages[b],e=_.indexOf(d.cheers,a.user);-1===e?d.cheeredYet=!1:d.cheeredYet=!0,a.table.messages[b]=d})}()},a.setMsgPlaying=function(b){a.msgPlaying=b},a.createMessage=function(){e.path("/tables/"+a.table._id+"/messages/add")},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"===b||"$digest"===b?a&&"function"==typeof a&&a():this.$apply(a)}}]),angular.module("rotachatApp").config(["$stateProvider",function(a){a.state("table",{url:"/table/:id",templateUrl:"app/table/table.html",controller:"TableCtrl"})}]),angular.module("rotachatApp").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{login:function(a,b){var h=b||angular.noop,i=f.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),i.resolve(a),h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isLoggedInAsync:function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===g.role},getToken:function(){return e.get("token")}}}]),angular.module("rotachatApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("rotachatApp").directive("backImg",function(){return{restrict:"A",scope:{url:"="},link:function(a,b,c){a.$watch("url",function(){b.css({"background-image":"url("+a.url+")","background-size":"cover"})})}}}),angular.module("rotachatApp.common").directive("bootstrapTagsInput",function(){function a(a,b){return b?angular.isFunction(a.$parent[b])?a.$parent[b]:function(a){return a[b]}:void 0}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:!1,link:function(b,c,d){$(function(){angular.isArray(b.model)||(b.model=[]);var e=$("select",c);e.tagsinput({typeahead:{source:angular.isFunction(b.$parent[d.typeaheadSource])?b.$parent[d.typeaheadSource]:null},maxTags:d.maxtags||10,itemValue:a(b,d.itemvalue),itemText:a(b,d.itemtext),tagClass:angular.isFunction(b.$parent[d.tagclass])?b.$parent[d.tagclass]:function(a){return d.tagclass}});for(var f=0;f<b.model.length;f++)e.tagsinput("add",b.model[f]);e.on("itemAdded",function(a){-1===b.model.indexOf(a.item)&&b.model.push(a.item)}),e.on("itemRemoved",function(a){var c=b.model.indexOf(a.item);-1!==c&&b.model.splice(c,1)});var g=b.model.slice();b.$watch("model",function(){var a,c=b.model.filter(function(a){return-1===g.indexOf(a)}),d=g.filter(function(a){return-1===b.model.indexOf(a)});for(g=b.model.slice(),a=0;a<d.length;a++)e.tagsinput("remove",d[a]);for(e.tagsinput("refresh"),a=0;a<c.length;a++)e.tagsinput("add",c[a])},!0)})}}}),angular.module("rotachatApp.common").directive("tooltipsy",function(){return function(a,b,c){a.item&&$(b).attr("title",a.item.title),$(b).tooltipsy()}}),angular.module("rotachatApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("rotachatApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("rotachatApp").controller("NavbarCtrl",["$scope","$location","Auth",function(a,b,c){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.isAdmin=c.isAdmin,a.getCurrentUser=c.getCurrentUser,a.logout=function(){c.logout(),b.path("/login")},a.isActive=function(a){return a===b.path()}}]),angular.module("rotachatApp").factory("socket",["socketFactory",function(a){var b=io("",{path:"/socket.io-client"}),c=a({ioSocket:b});return{socket:c,syncUpdates:function(a,b,d){d=d||angular.noop,c.on(a+":save",function(a){var c=_.find(b,{_id:a._id}),e=b.indexOf(c),f="created";c?(b.splice(e,1,a),f="updated"):b.push(a),d(f,a,b)}),c.on(a+":remove",function(a){var c="deleted";_.remove(b,{_id:a._id}),d(c,a,b)})},unsyncUpdates:function(a){c.removeAllListeners(a+":save"),c.removeAllListeners(a+":remove")}}}]),function(a){a.tooltipsy=function(b,c){this.options=c,this.$el=a(b),this.title=this.$el.attr("title")||"",this.$el.attr("title",""),this.random=parseInt(1e4*Math.random()),this.ready=!1,this.shown=!1,this.width=0,this.height=0,this.delaytimer=null,this.$el.data("tooltipsy",this),this.init()},a.tooltipsy.prototype={init:function(){var b,c=this,d=c.$el,e=d[0];c.settings=b=a.extend({},c.defaults,c.options),b.delay=+b.delay,"function"==typeof b.content&&c.readify(),b.showEvent===b.hideEvent&&"click"===b.showEvent?d.toggle(function(a){"click"===b.showEvent&&"A"==e.tagName&&a.preventDefault(),b.delay>0?c.delaytimer=window.setTimeout(function(){c.show(a)},b.delay):c.show(a)},function(a){"click"===b.showEvent&&"A"==e.tagName&&a.preventDefault(),window.clearTimeout(c.delaytimer),c.delaytimer=null,c.hide(a)}):d.bind(b.showEvent,function(a){"click"===b.showEvent&&"A"==e.tagName&&a.preventDefault(),c.delaytimer=window.setTimeout(function(){c.show(a)},b.delay||0)}).bind(b.hideEvent,function(a){"click"===b.showEvent&&"A"==e.tagName&&a.preventDefault(),window.clearTimeout(c.delaytimer),c.delaytimer=null,c.hide(a)})},show:function(b){this.ready===!1&&this.readify();var c=this,d=c.settings,e=c.$tipsy,f=c.$el,g=f[0],h=c.offset(g);if(c.shown===!1&&(function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(d.css)>0&&c.$tip.css(d.css),c.width=e.outerWidth(),c.height=e.outerHeight()),"cursor"===d.alignTo&&b){var i=[b.clientX+d.offset[0],b.clientY+d.offset[1]];if(i[0]+c.width>a(window).width()){({top:i[1]+"px",right:i[0]+"px",left:"auto"})}else{({top:i[1]+"px",left:i[0]+"px",right:"auto"})}}else var i=[function(){return d.offset[0]<0?h.left-Math.abs(d.offset[0])-c.width:0===d.offset[0]?h.left-(c.width-f.outerWidth())/2:h.left+f.outerWidth()+d.offset[0]}(),function(){return d.offset[1]<0?h.top-Math.abs(d.offset[1])-c.height:0===d.offset[1]?h.top-(c.height-c.$el.outerHeight())/2:h.top+c.$el.outerHeight()+d.offset[1]}()];e.css({top:i[1]+"px",left:i[0]+"px"}),c.settings.show(b,e.stop(!0,!0))},hide:function(a){var b=this;if(b.ready!==!1)return a&&a.relatedTarget===b.$tip[0]?void b.$tip.bind("mouseleave",function(a){a.relatedTarget!==b.$el[0]&&b.settings.hide(a,b.$tipsy.stop(!0,!0))}):void b.settings.hide(a,b.$tipsy.stop(!0,!0))},readify:function(){this.ready=!0,this.$tipsy=a('<div id="tooltipsy'+this.random+'" style="position:fixed;z-index:2147483647;display:none">').appendTo("body"),this.$tip=a('<div class="'+this.settings.className+'">').appendTo(this.$tipsy),this.$tip.data("rootel",this.$el);var b=this.$el,c=this.$tip;this.$tip.html(""!=this.settings.content?"string"==typeof this.settings.content?this.settings.content:this.settings.content(b,c):this.title)},offset:function(a){return this.$el[0].getBoundingClientRect()},destroy:function(){this.$tipsy&&(this.$tipsy.remove(),a.removeData(this.$el,"tooltipsy"))},defaults:{alignTo:"element",offset:[0,-1],content:"",show:function(a,b){b.fadeIn(100)},hide:function(a,b){b.fadeOut(100)},css:{},className:"tooltipsy",delay:200,showEvent:"mouseenter",hideEvent:"mouseleave"}},a.fn.tooltipsy=function(b){return this.each(function(){new a.tooltipsy(this,b)})}}(jQuery),angular.module("rotachatApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Login</h1><p>Accounts are reset on server restart from <code>server/config/seed.js</code>. Default account is <code>test@test.com</code> / <code>test</code></p><p>Admin account is <code>admin@admin.com</code> / <code>admin</code></p></div><div class=col-sm-12><form class=form name=form ng-submit=login(form) novalidate><div class=form-group><label>Email</label><input type=email name=email class=form-control ng-model=user.email required></div><div class=form-group><label>Password</label><input type=password name=password class=form-control ng-model=user.password required></div><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Please enter your email and password.</p><p class=help-block ng-show="form.email.$error.email && submitted">Please enter a valid email.</p><p class=help-block>{{ errors.other }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Login</button> <a class="btn btn-default btn-lg btn-register" href=/signup>Register</a></div><hr><div><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')"><i class="fa fa-facebook"></i> Connect with Facebook</a> <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')"><i class="fa fa-google-plus"></i> Connect with Google+</a> <a class="btn btn-twitter" href="" ng-click="loginOauth(\'twitter\')"><i class="fa fa-twitter"></i> Connect with Twitter</a></div></form></div></div><hr></div>'),a.put("app/account/settings/settings.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Current Password</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">Password must be at least 3 characters.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-lg btn-primary" type=submit>Save changes</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form class=form name=form ng-submit=register(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && submitted,\r\n                                            \'has-error\': form.name.$invalid && submitted }"><label>Name</label><input name=name class=form-control ng-model=user.name required><p class=help-block ng-show="form.name.$error.required && submitted">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\r\n                                            \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">Doesn\'t look like a valid email.</p><p class=help-block ng-show="form.email.$error.required && submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\r\n                                            \'has-error\': form.password.$invalid && submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Sign up</button> <a class="btn btn-default btn-lg btn-register" href=/login>Login</a></div><hr><div><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')"><i class="fa fa-facebook"></i> Connect with Facebook</a> <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')"><i class="fa fa-google-plus"></i> Connect with Google+</a> <a class="btn btn-twitter" href="" ng-click="loginOauth(\'twitter\')"><i class="fa fa-twitter"></i> Connect with Twitter</a></div></form></div></div><hr></div>'),a.put("app/admin/admin.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class=list-group><li class=list-group-item ng-repeat="user in users"><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span> <a ng-click=delete(user) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div>'),a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><!--<header class="hero-unit" id="banner">\r\n  <div class="container">\r\n    <h1>\'Allo, \'Allo!</h1>\r\n    <p class="lead">Kick-start your next web app with Angular Fullstack</p>\r\n  </div>\r\n</header>--><div class=container><div class="row marketing"><div class=flex-container><div ng-repeat="table in tables" class="flex-item table-box" ng-click=viewTable() back-img url=table.highlightUrl><!-- rota-table-thumbnail ( should include class="flex-item" ng-click and back-img )--><div class=transparent><h4 class=list-group-item-heading>{{table.title}}</h4><p class=list-group-item-text>{{table.topic}}</p></div><!-- /rota-table-thumbnail --></div></div></div></div><div class=footer><p>2014 rotaChat. cheers to that!</p></div><script>window.prettyGrid = function () {\r\n      // check if there is query in url\r\n      // and fire search in case its value is not empty\r\n\r\n      var vPortWidth = $(".flex-container").width();\r\n      var cellsAcross = Math.floor(vPortWidth / 256);\r\n      var cellWidth = vPortWidth / cellsAcross;\r\n\r\n      var $flexItems = $(".flex-item");\r\n\r\n      $flexItems.css("width", cellWidth + "px");\r\n      $flexItems.css("height", cellWidth + "px");\r\n    };\r\n    // and fire it after definition\r\n    window.prettyGrid();\r\n\r\n    $(window).resize(function() {\r\n      window.prettyGrid();\r\n    });</script>'),a.put("app/table/MessageAdder/MessageAdder.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=row><div class="col-sm-8 col-sm-offset-2"><h2>Add a Message</h2><!-- <form role="form" ng-submit="catchEnter" novalidate> --><div class="alert alert-warning"><p><strong>Important:</strong> The recording feature currently only works in Firefox Nightly. This is a special version of Firefox which can be found here: <a class=alert-link href="http://nightly.mozilla.org/">Firefox Nightly</a></p><p>In Chrome, audio will record but not video</p></div><message-recorder></message-recorder><div class=form-group><label for=topic>Topic</label><input class=form-control id=topic placeholder="Enter topic of conversation" ng-model=topic></div><div class=form-group><label>Tags</label><br><bootstrap-tagsinput maxtags=5 tagclass=getTagClass ng-model=tags></bootstrap-tagsinput></div><p class=help-block>{{ message }}</p><button type=submit class="btn btn-primary" ng-click=createMessage()>Submit</button><!-- </form> --></div></div>'),a.put("app/table/MessageRecorder/MessageRecorder.html",'<article><section class=experiment><div class=inner><!--  <h2 id="download-url">\r\n           <a ng-href="{{downloadURL}}" ng-show="downloadURL" download="RecordRTC.webm" target="_blank">\r\n               Save RecordRTC.webm to Disk!\r\n           </a>\r\n       </h2> --><br><video id=video autoplay controls></video><hr><button class="btn btn-success" id=start-recording ng-disabled=startRecordingDisabled ng-click=startRecording()><span class="glyphicon glyphicon-record"></span> Record Audio+Video</button> <button class="btn btn-danger" id=stop-recording ng-disabled=stopRecordingDisabled ng-click=stopRecording()><span class="glyphicon glyphicon-stop"></span> Stop</button><br><!-- <form action="/api/videos" method="post" enctype="multipart/form-data">\r\n          <input type="file" name="snapshot" />\r\n          <input type="submit" value="Upload" />\r\n      </form> --></div></section></article>'),a.put("app/table/TableAdder/TableAdder.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class="col-sm-8 col-sm-offset-2"><h2>Create a Table</h2><div class="alert alert-warning"><p><strong>Important:</strong> The recording feature currently only works in Firefox Nightly. This is a special version of Firefox which can be found here: <a class=alert-link href="http://nightly.mozilla.org/">Firefox Nightly</a></p><p>In Chrome, audio will record but not video</p></div><message-recorder></message-recorder></div></div><div class=row><div class="col-sm-4 col-sm-offset-2"><p></p><div class=form-group><label for=title>Title</label><input class=form-control id=title placeholder="Create a name for your table" ng-model=title></div></div><div class=col-sm-4><div class=instructions><p>The title can be anything you want. Titles that have to do with the general topic of conversation work best. For example, you might choose <strong>Cats</strong>.</p></div></div></div><div class=row><div class="col-sm-4 col-sm-offset-2"><div class=form-group><label for=topic>Topic</label><input class=form-control id=topic placeholder="Enter initial topic of conversation" ng-model=topic></div></div><div class=col-sm-4><div class=instructions><p>The topic describes the initial content of the video message. For example, if your table\'s title is <strong>Cats</strong> this topic might be <strong>Grumpy Cat</strong>.</p></div></div></div><div class=row><div class="col-sm-4 col-sm-offset-2"><div class=form-group><label>Tags</label><br><bootstrap-tagsinput maxtags=5 tagclass=getTagClass ng-model=tags></bootstrap-tagsinput></div></div><div class=col-sm-4><div class=instructions><p>Enter up to 5 tags that describe your video message. This is important for search and retrieval. To add a new tag, type in the box and hit enter or return.</p></div></div></div><div class=row><div class="col-sm-4 col-sm-offset-2"><div class=form-group><label for=photo>Cover Photo</label><br><input id=previewSelect type=file accept=image> <img id=preview></div></div><div class=col-sm-4><div class=instructions><p>Please add a cover photo. Keep the home page <strong>beautiful</strong>.</p></div></div></div><div class=row><div class="col-sm-4 col-sm-offset-2"><div ng-show=message class="alert alert-success"><p class=help-block>{{ message }} <a class=alert-link href="/">Go back</a> to main page to find it</p></div><button type=submit class="btn btn-primary" ng-click=createTable()>Submit</button></div></div></div><script>//$("#previewSelect").change(function() {\r\n  //	var blobURL = window.URL.createObjectURL($("#previewSelect").get(0).files[0]);\r\n  //	$("#preview").get(0).src = blobURL;\r\n  //});</script>'),a.put("app/table/TableConsole/TableConsole.html",'<header><div class=table-image back-img url=url></div><div class=table-title-container><!-- data-ellipsis is used in conjunction with ng-bind to produce ellipsis if\r\n        the content is too much for the container that it is in. --><h3 data-ellipsis="" ng-bind=tabletitle class=table-title></h3></div></header><section><header class=table-controls-container><div class=list-group><div class="list-group-item table-controls"><ul class="nav nav-pills"><li><a class="btn btn-link" tooltipsy title="Invite More Guests" ng-click=""><i class="fa fa-users"></i>inviteGuests</a></li><li><a class="btn btn-link" tooltipsy title="Setup Table Preferences" ng-click=""><i class="fa fa-wrench"></i>setUp</a></li></ul></div></div></header><section class=aboutContainer><div class=table-container-scrolldiv><ul class=aboutInfo><li><h3 class=aboutTitle>Permissions</h3></li><li><p>view: Public</p></li><li><p>join: Guests Only</p></li><li><p>invite: Host Only</p></li></ul><div class=aboutDescription><h3 class=aboutTitle>Description</h3><p>This is where a description of the table will go for guests. Let\'s make it expandable so people can say as much as they want when they create it.</p></div><div class=guestList><h3>Guest List</h3><ul class=media-list><li class=media><img class="media-object pull-left img-circle" src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+ data-src=holder.js/64x64 alt=64x64><div class=media-body><h4>Person Name</h4><p>12 messages - 12:04</p></div></li><li class=media><img class="media-object pull-left img-circle" src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+ data-src=holder.js/64x64 alt=64x64><div class=media-body><h4>Person Name</h4><p>12 messages - 12:04</p></div></li><li class=media><img class="media-object pull-left img-circle" src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+ data-src=holder.js/64x64 alt=64x64><div class=media-body><h4>Person Name</h4><p>12 messages - 12:04</p></div></li><li class=media><img class="media-object pull-left img-circle" src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+ data-src=holder.js/64x64 alt=64x64><div class=media-body><h4>Person Name</h4><p>12 messages - 12:04</p></div></li><li class=media><img class="media-object pull-left img-circle" src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+ data-src=holder.js/64x64 alt=64x64><div class=media-body><h4>Person Name</h4><p>12 messages - 12:04</p></div></li><li class=media><img class="media-object pull-left img-circle" src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+ data-src=holder.js/64x64 alt=64x64><div class=media-body><h4>Person Name</h4><p>12 messages - 12:04</p></div></li></ul></div></div></section></section>'),
a.put("app/table/TablePlaylist/TablePlaylist.html",'<div class=playlist-col><div class=table-playlist><div class=list-group><div class="list-group-item table-playlist-header"><ul class="nav nav-pills"><li><a class="btn btn-link" tooltipsy title="Add New Message" ng-click=createMessage()><i class="fa fa-video-camera"></i>addNew</a></li><li><a class="btn btn-link" tooltipsy title="Play All Messages" ng-click=playVideos()><i class="fa fa-play-circle-o"></i>playAll</a></li></ul></div><div class=table-playlist-body><div class=table-playlist-scrolldiv><div ng-repeat="message in table.messages" class=list-group-item ng-class="{ \'goldenrod-bg\' : msgPlaying == $index }"><div class=media ng-click=setVideo($index)><a class=pull-left><img class=img-circle class=media-object ng-src={{message.author[0].photo}} style="width: 64px; height: 64px"></a><div class=media-body><h4 class=media-heading>{{message.topic}}</h4><div class=tagContainer><span class="tag label label-primary pull-left" ng-repeat="tag in message.tags">{{tag}}</span></div><p><i class="fa fa-beer"></i> <span>{{message.cheers.length}}</span> <span>2m30s</span></p></div></div></div></div></div></div><!-- table-playlist-body-end --></div></div>'),a.put("app/table/TableVideoContainer/TableVideoContainer.html","<div class=video-col><div class=vid-cont><videogular vg-player-ready=onPlayerReady($API) vg-complete=onCompleteVideo() vg-theme=config.theme><vg-media vg-src=config.sources vg-tracks=config.tracks></vg-media><vg-controls><vg-play-pause-button></vg-play-pause-button><vg-time-display>{{ currentTime | date:'mm:ss' }}</vg-time-display><vg-scrub-bar><vg-scrub-bar-current-time></vg-scrub-bar-current-time></vg-scrub-bar><vg-time-display>{{ timeLeft | date:'mm:ss' }}</vg-time-display><vg-volume><vg-mute-button></vg-mute-button><vg-volume-bar></vg-volume-bar></vg-volume><vg-fullscreen-button></vg-fullscreen-button></vg-controls></videogular></div><table-video-info-panel info=currentMessageInfo></table-video-info-panel></div>"),a.put("app/table/TableVideoInfoPanel/TableVideoInfoPanel.html",'<div class=video-info><h2>{{ info.title }}</h2><div class=tag-container><span class="tag label label-primary" ng-repeat="tag in info.tags">{{tag}}</span></div><div class=author-cont><img class="pull-left img-circle" src="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn1/t1.0-1/c1.0.50.50/p50x50/1601387_10203348977065537_1028970569_s.jpg"><h4>{{ info.author }}</h4></div></div>'),a.put("app/table/table.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div id=Table><div class="row table-body"><table-console class="col-xs-3 table-console-container" tabletitle=tableTitle url=highlightUrl></table-console><table-video-container class="col-xs-6 video-container navbar-spacer"></table-video-container><table-playlist class="col-xs-3 table-playlist-container"></table-playlist></div></div><script>window.init = function () {\r\n    // check if there is query in url\r\n    // and fire search in case its value is not empty\r\n    $(".table-playlist-scrolldiv").slimScroll({height: \'auto\'});\r\n    $(".table-container-scrolldiv").slimScroll({height: \'auto\'});\r\n  };\r\n  // and fire it after definition\r\n  window.init();\r\n\r\n  $(window).resize(function () {\r\n    window.init();\r\n  });</script>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-fixed-top navbar-dark" ng-controller=NavbarCtrl role=navigation><div class=container-fluid><div class="navbar-logo-container navbar-header"><button type=button class=navbar-toggle data-toggle=collapse data-target=#navigation-list><span class="glyphicon glyphicon-align-justify"></span><span class=menu-button-text>menu</span></button> <a class=navbar-brand ng-href="/"><button class="btn btn-default btn-inverse pull-left logo rotate"><span class=glyphicon></span></button><h3>rotaChat</h3></a></div><div class="collapse navbar-collapse" id=navigation-list><ul class="nav navbar-nav navbar-right"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-hide="item.authenticate && !currentUser" ng-href={{item.link}} data-toggle=tooltip data-placement=bottom tooltipsy=true><span class=glyphicon ng-class=item.class></span></a></li><li ng-hide=currentUser ng-class="{active: isActive(\'/signup\')}"><a tooltipsy=true href=/signup data-placement=bottom><span class="glyphicon glyphicon-pencil"></span>joinUs</a></li><li ng-hide=currentUser ng-class="{active: isActive(\'/login\')}"><a tooltipsy=true href=/login data-placement=bottom><span class="glyphicon glyphicon-log-in"></span>logIn</a></li><li ng-class="{active: isActive(\'/logout\')}"><a tooltipsy=true href=/tables/add data-placement=bottom><span class="glyphicon glyphicon-plus"></span>addTable</a></li><li ng-show=currentUser ng-class="{active: isActive(\'/logout\')}"><a tooltipsy=true id=logout href="" ng-click=logout() data-placement=bottom><span class="glyphicon glyphicon-log-out"></span>logOut</a></li></ul></div></div></div>')}]);